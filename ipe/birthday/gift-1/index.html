<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petualangan Ulang Tahun</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            /* Background gradasi pastel ceria */
            background: linear-gradient(135deg, #fbcfe8 0%, #fef08a 50%, #bfdbfe 100%);
            background-attachment: fixed;
            color: #334155;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .polaroid {
            /* Bingkai polaroid dengan nuansa pastel dan border putih */
            background: linear-gradient(to bottom right, #fff1f2, #fefce8, #f0f9ff);
            padding: 1rem 1rem 2rem 1rem;
            box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.15), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            border-radius: 1rem;
            border: 6px solid white;
            transform: rotate(-2deg);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .polaroid:hover {
            transform: rotate(0deg) scale(1.02);
            box-shadow: 0 20px 30px -5px rgba(0, 0, 0, 0.2);
        }
        .image-placeholder {
            background: linear-gradient(45deg, #e2e8f0, #cbd5e1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #64748b;
            font-weight: bold;
            text-align: center;
        }
        /* Styling teks cerita agar lebih meriah */
        .story-text-highlight {
            color: #9d174d; /* Pink gelap / Magenta untuk teks */
            text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
        }
        
        /* Tambahan untuk Gallery Background Acak */
        #bg-gallery {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: 1; /* Pastikan berada di atas background body */
            opacity: 0.25; /* Opasitas dinaikkan sedikit agar siluet terlihat jelas */
            pointer-events: none; /* Agar tidak bisa di-klik dan tidak mengganggu game */
            overflow: hidden;
        }
        
        .bg-img-item {
            position: absolute; /* Kunci penumpukan acak */
            object-fit: cover;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3); /* Memberi dimensi pada tumpukan */
            /* FALLBACK: Jika foto gagal muat di preview, ini akan membuatnya terlihat seperti kertas polaroid kosong */
            background-color: rgba(255, 255, 255, 0.8); 
            border: 4px solid #ffffff;
            color: transparent; /* Sembunyikan teks broken link */
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 relative">

    <!-- Container untuk 80 Foto Background -->
    <div id="bg-gallery"></div>

    <div id="game-container" class="max-w-md w-full mx-auto relative z-10">
        <!-- Main Game Card -->
        <div class="polaroid mb-8 relative">
            <!-- Ornamen Dekoratif Sederhana -->
            <div class="absolute -top-4 -right-4 text-4xl transform rotate-12">âœ¨</div>
            <div class="absolute -bottom-4 -left-4 text-4xl transform -rotate-12">ðŸŽ‰</div>
            
            <!-- Image Area -->
            <div id="image-container" class="w-full aspect-square mb-6 rounded-lg overflow-hidden relative shadow-inner border-2 border-pink-100">
                <img id="scene-image" src="" alt="Scene Image" class="w-full h-full object-cover hidden">
                <div id="placeholder-text" class="absolute inset-0 image-placeholder text-sm px-4">
                    Memuat foto...
                </div>
            </div>
            
            <!-- Story Text Area -->
            <div class="px-2">
                <p id="scene-text" class="story-text-highlight text-xl leading-relaxed text-center font-bold min-h-[100px] flex items-center justify-center">
                    Teks cerita akan muncul di sini.
                </p>
            </div>
        </div>

        <!-- Choices Area -->
        <div id="choices-container" class="flex flex-col space-y-4">
            <!-- Buttons will be injected here by JS -->
        </div>
    </div>

    <script>
        /**
         * AREA KONFIGURASI BACKGROUND FOTO (Acak)
         */
        const backgroundPhotos = [
            // Batch 1 (10 Foto)
            "0a1b98d0-88e8-4a2c-80c8-cd1af2f6f81b.jpg", "0b30e914-5a47-4632-b338-cd41c3f3b7d1.jpg",
            "0e63f929-68b2-4f26-9ae8-64d408703bd6.jpg", "1c51c290-0d06-4827-a3e6-0b8edb37ab40.jpg",
            "1d0f032b-b1f7-48bc-972f-22d178ac85a2.jpg", "1e809e68-ec69-4091-913b-e805342342c1.jpg",
            "2c504ced-b605-4d62-93b2-b7482127b181.jpg", "2d3905a6-37d3-4bf2-a7a2-073eed7ca9dd.jpg",
            "5c514040-fdf5-421a-80b5-363b6fae652a.jpg", "6eeeb626-7dfc-40b8-a248-97c085b73606.jpg",
            // Batch 2 (10 Foto)
            "8e4a4ce2-c89d-42f5-b6e5-5a9e931bc9bd.jpg", "62cc68b7-8e37-4b08-ab4f-b826148744c2.jpg",
            "67fa67d0-4e20-4672-b81d-81d59c6972d0.jpg", "077ff3b7-a585-4eb1-b2ff-05325b9f5b79.jpg",
            "85e70a09-5df6-4f78-aaf4-62c719dea23c.jpg", "930ed0e7-3cdc-460c-89ff-3cda5d93d245.jpg",
            "970cd0da-d67c-4e61-a596-75b86350441d.jpg", "6510d24d-8f28-4fe4-8ca7-2fa289d23308.jpg",
            "7788fbf1-f01e-45e4-894e-6fcea25ade4e.jpg", "8389d909-45ae-4178-9c15-2f2275147415.jpg",
            // Batch 3 (8 Foto)
            "10829ac4-5bbc-4733-a2a0-4036219fba8b.jpg", "59883c71-855f-4028-a043-64158a342abb.jpg",
            "69324f5e-7f00-45f4-96c4-2981fafbcd74.jpg", "7651102b-6430-4e57-a7ed-918d846cdad2.jpg",
            "95746289-955c-4711-9416-0c22cfede4f9.jpg", "a9348dba-0213-4bf2-9531-fa915c6332e7.jpg",
            "ae2d4b1d-241e-496c-abff-47df980727c5.jpg", "b8a83a04-a7ee-4af5-b5e3-4b269ec3d0ca.jpg",
            // Batch 4 (9 Foto)
            "b25942ab-7cc0-4237-84cf-378397589d94.jpg", "C2C23ED4-80E4-409E-8E91-64521BC476BE.jpg",
            "d0c19ff2-27fb-4da4-9ed7-1dc7d32c1c1a.jpg", "e3581d96-0785-485f-8c09-07c2df631438.jpg",
            "e34723c9-fb66-4041-96f8-707e22dba9ab.jpg", "eb4c7d69-6d10-4cdb-8fb7-59c82149ebd5.jpg",
            "f4d16661-005f-42ab-b8f7-af5dfc77c5d1.jpg", "F82808F8-4E25-4F2A-9651-F7FD53C02032.jpg",
            "fcb35894-ba72-45f6-8909-5a6edd2a8f1a.jpg",
            // Batch 5 (8 Foto)
            "IMG_2671.jpg", "IMG_2692.jpg", "IMG_2707.jpg", "IMG_2708.jpg",
            "IMG_4270.jpg", "IMG_4271.jpg", "IMG_4279.jpg", "IMG_4982.jpg",
            // Batch 6 (10 Foto)
            "IMG_5007.jpg", "IMG_5158.jpg", "IMG_5160.jpg", "IMG_5285.jpg",
            "IMG_5751.jpg", "IMG_5753.jpg", "IMG_5767.jpg", "IMG_5769.jpg",
            "IMG_5771.jpg", "IMG_5775.jpg",
            // Batch 7 (10 Foto)
            "IMG_5799.jpg", "IMG_5800.jpg", "IMG_5803.jpg", "IMG_5847.jpg",
            "IMG_5851.jpg", "IMG_6284.jpg", "IMG_6306.jpg", "IMG_6307.jpg",
            "IMG_6315.jpg", "IMG_6316.jpg",
            // Batch 8 (10 Foto)
            "IMG_6328.jpg", "IMG_6384.jpg", "IMG_6397.jpg", "IMG_6472.jpg",
            "IMG_6474.jpg", "IMG_6497.jpg", "IMG_7265.jpg", "IMG_7348.jpg",
            "IMG_8880.jpg", "IMG_8885.jpg"
        ];

        /**
         * AREA KONFIGURASI CERITA & FOTO UTAMA
         * DITAHAN / PENDING BERDASARKAN INSTRUKSI.
         */
        const storyData = [
            { id: 1, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Selamat ulang tahun sayang! Aku bikin galeri memori mini buat kita. Coba lihat foto pertama ini, senyum kamu manis banget. Suka sama fotonya?", choices: [{ text: "Suka banget!", next: 2 }, { text: "Biasa aja ih", next: 3 }] },
            { id: 2, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Tuh kan, emang foto ini bagus. Kalau yang ini gimana? Pas kamu lagi bawa tas pink jalan-jalan. Kamu kelihatan cakep di sini. Suka?", choices: [{ text: "Iya, aku suka!", next: 4 }, { text: "Hmm, jelek ah", next: 5 }] },
            { id: 3, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Biasa aja? Yaudah coba lihat foto kamu yang ini. Pas rebahan natural aja tetep cantik. Kamu suka nggak hasil jepretanku?", choices: [{ text: "Wah, bagus! Suka!", next: 4 }, { text: "Hapus nggak?! Jelek!", next: 6 }] },
            { id: 4, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Kalo foto yang ini? Ini salah satu favoritku sih, senyumnya pakai pashmina hijau nular banget. Setuju nggak?", choices: [{ text: "Setuju 100%", next: 7 }, { text: "Mukaku aneh di situ", next: 8 }] },
            { id: 5, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Jelek? Oke, mari kita lihat foto yang LEBIH 'estetik'. Coba lihat muka konyol kamu pakai hoodie ungu ini. Masih mau bilang foto sebelumnya jelek?", choices: [{ text: "Hahaha ampun, iya yang tadi mendingan", next: 4 }, { text: "Tetep aja dua-duanya jelek!", next: 6 }] },
            { id: 6, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Nggak akan aku hapus! Wle. Nah kalau foto ini, masa kamu nggak suka juga? Ini kan pas kamu lagi manis senyum pakai hijab coklat.", choices: [{ text: "Oke, yang ini aku suka", next: 7 }, { text: "Gak suka gayanya", next: 9 }] },
            { id: 7, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Nah, lanjut! Ini pas kita lagi jajan/makan bareng. Kamu kangen nggak sih hari itu? Suka sama fotonya?", choices: [{ text: "Kangen! Fotonya juga gemes", next: 10 }, { text: "Fokus ke makanannya aja, fotonya B aja", next: 11 }] },
            { id: 8, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Aneh apanya, lucu gitu. Coba lihat yang ini, pas kamu foto bareng kucing. Sama-sama gemes! Suka kan?", choices: [{ text: "Iya deh, lumayan", next: 10 }, { text: "Tetep kurang ah", next: 9 }] },
            { id: 9, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Kamu tuh emang susah dipuasin ya soal foto! Coba lihat gaya jari konyol kamu ini. Suka nggak? (Awas kalau bilang nggak!)", choices: [{ text: "Hahaha, iya ini lucu, aku suka", next: 10 }, { text: "Gak! Hapus!", next: 12 }] },
            { id: 10, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Yay! Oke, mari kita lihat foto yang agak sweet. Lihat kamu meluk boneka gede ini. Suka nggak nuansanya?", choices: [{ text: "Suka, sweet banget", next: 13 }, { text: "Geli ah lihatnya", next: 14 }] },
            { id: 11, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Dasar. Kalau foto kamu pas lagi fokus ngapain gitu, aku suka banget lihatnya. Kamu suka foto candid ini?", choices: [{ text: "Wah, ternyata bagus. Suka!", next: 13 }, { text: "Kelihatan tembem/jelek ih", next: 12 }] },
            { id: 12, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Yee, yang penting momennya. Coba lihat foto kita pas lagi capek tapi happy ini. Pasti kamu suka kan?", choices: [{ text: "Iya, suka banget nginget hari itu", next: 13 }, { text: "Muka kita kucel banget", next: 15 }] },
            { id: 13, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Mantap! Lanjut ke foto kamu yang paling sering aku pandangin kalau lagi kangen. Kamu sendiri suka nggak sama foto ini?", choices: [{ text: "Aww, iya aku suka", next: 16 }, { text: "Maluuu, biasa aja padahal", next: 17 }] },
            { id: 14, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Geli ya? Yaudah ini ada foto derp kamu. Lebih suka yang ini daripada yang sweet?", choices: [{ text: "Hahaha iya mending ini lucu", next: 16 }, { text: "Sama-sama bikin geli", next: 15 }] },
            { id: 15, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Kucel/Geli apanya, natural itu namanya! Coba lihat foto natural kita yang ini. Suka nggak?", choices: [{ text: "Iya deh, yang ini mendingan, suka", next: 16 }, { text: "Nggak suka juga", next: 18 }] },
            { id: 16, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Hampir selesai nih galerinya. Ini foto berdua kita yang menurutku paling dapet banget chemistry-nya. Kamu paling suka foto ini kan?", choices: [{ text: "Iya dong, the best!", next: 19 }, { text: "Ada foto lain yang lebih bagus sih", next: 19 }] },
            { id: 17, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Nggak usah malu, emang cakep kok! Coba lihat satu lagi foto candid kamu ini. Gimana, suka?", choices: [{ text: "Oke deh, aku suka", next: 19 }, { text: "Nggak, aku jelek di situ", next: 18 }] },
            { id: 18, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Kamu dari tadi banyak nggak sukanya ya! Ini foto terakhir buat hukuman. Aib kita berdua! Suka nggak suka harus terima!", choices: [{ text: "Hahaha ampun, iya suka!", next: 19 }, { text: "Tidaaaak!", next: 19 }] },
            { id: 19, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Akhirnya sampai di foto favorit utamaku. Semua perjalanan dan kenangan kita ada di sini. Suka banget kan sama foto ini?", choices: [{ text: "Suka bangeeet!", next: 20 }, { text: "Sayang kamu!", next: 20 }] },
            { id: 20, photo: "KOSONG_TUNGGU_INSTRUKSI.jpg", text: "Happy Birthday Sayang! Makasih udah nemenin bikin banyak momen bagus. Siap nerima kado aslinya?", choices: [{ text: "Siap dong! Mana kadonya?", next: 1 }, { text: "Lihat foto-fotonya lagi ah", next: 1 }] }
        ];

        // LOGIKA GAME
        const imageEl = document.getElementById('scene-image');
        const placeholderText = document.getElementById('placeholder-text');
        const textEl = document.getElementById('scene-text');
        const choicesContainer = document.getElementById('choices-container');

        // Fungsi untuk merender tampilan berdasarkan ID cerita
        function renderScene(sceneId) {
            const scene = storyData.find(s => s.id === sceneId);
            if (!scene) return;

            textEl.innerText = scene.text;

            imageEl.classList.add('hidden');
            placeholderText.classList.remove('hidden');
            placeholderText.innerText = `Menunggu foto:\n${scene.photo}`; 
            
            const imgLoad = new Image();
            imgLoad.onload = function() {
                imageEl.src = scene.photo;
                imageEl.classList.remove('hidden');
                placeholderText.classList.add('hidden');
            };
            // Fallback untuk foto utama yang belum terisi
            imgLoad.onerror = function() {
                placeholderText.classList.remove('hidden');
            };
            imgLoad.src = scene.photo;

            choicesContainer.innerHTML = '';
            scene.choices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = "w-full bg-gradient-to-r from-pink-300 via-yellow-200 to-blue-300 hover:from-pink-400 hover:via-yellow-300 hover:to-blue-400 text-slate-800 font-bold py-4 px-6 rounded-full shadow-lg transition-all duration-300 transform hover:-translate-y-1 active:scale-95 text-center border-2 border-white hover:border-pink-200";
                btn.innerText = choice.text;
                btn.onclick = () => renderScene(choice.next);
                choicesContainer.appendChild(btn);
            });
        }

        // Fungsi untuk merender foto background secara dinamis (SISTEM ACAK/TUMPUK)
        function renderBackgroundGallery() {
            const bgContainer = document.getElementById('bg-gallery');
            bgContainer.innerHTML = ''; 
            
            const totalPhotos = backgroundPhotos.length;
            const slotsToRender = 80; // Render tepat 80 lapisan foto

            for (let i = 0; i < slotsToRender; i++) {
                let imgEl = document.createElement('img');
                
                // Gunakan foto dari array secara berulang jika indeks melebihi jumlah foto
                const photoIndex = i % totalPhotos;
                imgEl.src = backgroundPhotos[photoIndex];
                imgEl.className = 'bg-img-item';
                
                // MENCEGAH BROWSER TERBEBANI
                imgEl.loading = 'lazy';
                
                // Jika foto gagal dimuat di lingkungan preview, ganti dengan transparan
                imgEl.onerror = function() {
                    this.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'; 
                };

                // Kalkulasi Acak (Randomizer)
                const size = Math.floor(Math.random() * (220 - 90 + 1)) + 90; 
                const posX = Math.floor(Math.random() * 90); 
                const posY = Math.floor(Math.random() * 90); 
                const rotation = Math.floor(Math.random() * 80) - 40; 
                const zIndex = Math.floor(Math.random() * 100);

                // Terapkan kalkulasi ke elemen
                imgEl.style.width = `${size}px`;
                imgEl.style.height = `${size}px`;
                imgEl.style.left = `${posX}%`;
                imgEl.style.top = `${posY}%`;
                imgEl.style.transform = `rotate(${rotation}deg)`;
                imgEl.style.zIndex = zIndex;

                bgContainer.appendChild(imgEl);
            }
        }

        window.onload = () => {
            renderBackgroundGallery();
            renderScene(1);
        };
    </script>
</body>
</html>
